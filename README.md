# Кубок 5 вёрст - Анализатор

Веб-приложение для сбора, анализа и визуализации статистики забегов "5 вёрст" со всех локаций России.

---

## Быстрое развертывание с помощью скрипта

Этот скрипт автоматизирует полную установку и настройку проекта на сервере под управлением Ubuntu/Debian.

### 1. Клонирование репозитория

```bash
git clone https://github.com/ваш_юзернейм/ваш_репозиторий.git
cd ваш_репозиторий
```

### 2. Запуск скрипта установки

Скрипт необходимо запускать с правами `sudo`, так как он настраивает системные сервисы.

1.  **Сделайте скрипт исполняемым:**
    ```bash
    chmod +x install.sh
    ```

2.  **Запустите установку:**

    *   **Вариант А: Для всех локаций** (может занять много времени)
        ```bash
        sudo ./install.sh
        ```

    *   **Вариант Б: Только для одной локации** (например, Королёв)
        ```bash
        sudo ./install.sh --korolev
        ```

### Что делает скрипт?

- Создает виртуальное окружение `venv`.
- Устанавливает все необходимые Python-пакеты.
- Запускает первичный сбор данных в фоновом режиме.
- Настраивает и запускает `systemd` сервис, чтобы приложение работало в фоне на порту `8001`.
- Добавляет задачу в `cron` для автоматического ежечасного обновления данных.

### После установки

После успешного выполнения скрипта ваше приложение будет работать на порту `8001`. Вам останется только настроить веб-сервер (например, Nginx) в качестве reverse proxy, чтобы сделать приложение доступным извне.

#### Пример конфигурации для Nginx

1.  **Создайте файл конфигурации:**
    ```bash
    sudo nano /etc/nginx/sites-available/verst_analyzer
    ```
2.  **Вставьте содержимое, заменив `ваш_домен_или_IP`:**
    ```nginx
    server {
        listen 80;
        server_name ваш_домен_или_IP;

        location / {
            proxy_pass http://127.0.0.1:8001;
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
    }
    ```
3.  **Активируйте сайт и перезапустите Nginx:**
    ```bash
    sudo ln -s /etc/nginx/sites-available/verst_analyzer /etc/nginx/sites-enabled/
    sudo nginx -t
    sudo systemctl restart nginx
    ```